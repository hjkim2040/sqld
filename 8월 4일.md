# 강의 정리
## 관계형 데이터베이스 개요
### 데이터베이스(Database)와 DBMS(Database Management System)

- 데이터베이스 : 데이터의 집합. 꼭 형식을 갖추지 않아도 엑셀 파일을 모아 둔다면 그것 또한 데이터베이스라고 할 수 있다.

- DBMS : 데이터를 효과적으로 관리하기 위한 시스템

  - 개인이 파일을 여러 개 묶어서 폴더에 보관하면 데이터를 찾고 관리하는데 많은 비용이 발생

  - 이를 보다 시스템적으로 작동하게 만든 시스템을 DBMS 라고 한다(ORACLE, MYSQL 등)

### 관계형 데이터베이스 구성 요소

- **계정** : 데이터의 접근 제한을 위한 여러 업무별 / 시스템별 계정이 존재

- **테이블** : DBMS의 DB 안에서 데이터가 저장되는 형식

- **스키마** : 테이블이 어떠한 구성으로 되어있는지, 어떠한 정보를 가지고 있는지에 대한 기본적인 구조를 정의

### 테이블

1. 정의 

- 엑셀에서의 워크시트처럼 행과 열을 갖는 2차원 구조로 구성, 데이터를 입력하여 저장하는 최소 단위

- 컬럼은 속성이라고도 부름(모델링 단계마다 부르는 용어가 다름)

2. 특징

- 하나의 테이블은 반드시 하나의 유저(계정) 소유여야 함

- 테이블간 관계는 일대일, 일대다, 다대다의 관계를 가질 수 있음

- 테이블명은 중복될 수 없지만, 소유자가 다른 경우 같은 이름으로 생성 가능

    - SCOTT 소유의 EMP 테이블 존재, HR 소유의 EMP 테이블 생성 가능(같은 계정 내 동일한 객체명 생성 불가)

- 테이블은 행 단위로 데이터가 입력, 삭제되며 수정은 값의 단위로 가능

    - 사원 테이블에 새로운 사원 정보를 사원번호, 사원이름 등의 테이블 내 모든 컬럼의 값을 동시에 전달하여 입력
    
    - 삭제 시에는 해당 사원의 모든 정보가 삭제됨(수정 시에는 특정 직원의 급여만 수정 가능)

### SQL(Structured Query Language)

- 관계형 데이터베이스에서 데이터 조회 및 조작, DBMS 시스템 관리 기능을 명령하는 언어

- 데이터 정의(DDL), 데이터 조작(DML), 데이터 제어 언어(DCL) 등으로 구분

- SQL 문법은 대, 소문자를 구분 X

### 관계형 데이터베이스 특징

- 데이터의 분류, 정렬, 탐색 속도가 빠름

- 신뢰성이 높고, 데이터의 무결성 보장

- 기존의 작성된 스키마를 수정하기 어려움

- 데이터베이스의 부하를 분석하는 것이 어려움

### 데이터 무결성(integrity)

- 데이터의 정확성과 일관성을 유지하고, 데이터에 결손과 부정합이 없음을 보증하는 것

- 데이터베이스에 저장된 값과 그것이 표현하는 현실의 비즈니스 모델의 값이 일치하는 정확성을 의미함

- 데이터 무결성을 유지하는 것이 데이터베이스 관리시스템에 중요한 기능

### 데이터 무결성 종류

1. 개체 무결성 : 테이블의 기본키를 구성하는 컬럼(속성)은 NULL 값이나 중복값을 가질 수 었음

2. 참조 무결성 : 외래키 값은 NULL 이거나 참조 테이블의 기본키 값과 동일해야 한다.

    -    외래키란 참조 테이블의 기본키에 정의된 데이터만 허용되는 구조이므로

3. 도메인 무결성 : 주어진 속성 값이 정의된 도메인에 속한 값 이어야 함

4. NULL 무결성 : 특정 속성에 대해 NULL을 허용하지 않는 특징

5. 고유 무결성 : 특정 속성에 대해, 값이 중복되지 않는 특징

6. 키 무결성 : 하나의 릴세이션(관계)에서는 적어도 하나의 키가 존재해야 함

    - 테이블이 서로 관계를 가질 경우 반드시 하나 이상의 조인키를 가짐

### ERD(Entity Relationship Diagram)

- ERD 란 테이블 간 서로의 상관 관계를 그림으로 표현한 것

- ERD 의 구성요소에는 엔터티(Entity), 관계(Relationship), 속성(Attribute)가 있다.

    - 현실 세계의 데이터는 이 3 가지의 구성으로 모두 표현 가능

## SELECT 문
### SQL 종류

|구분|종류|
|---|---|
|DDL</br>(Data Definition Language)|CREATE, ALTER, DROP, TRUNCATE|
|DML</br>(Data Manipulation Language)|INSERT, DELETE, UPDATE, MERGE|
|DCL</br>(Date Control Language)|GRANT, REVOKE|
|TCL</br>(Transaction Control Language)|COMMIT, ROLLBACK|
|DQL</br>(Data Query Language)|SELECT|

- SELECT 문은 따로 SQL 종류 중 어디에도 속하지 않아서 SELECT 문을 위한 DQL 등장

### SELECT 문 구조

- SELECT 문은 6개 절로 구성

- 각 절의 순서대로 작성해야 한다

    - GROUPBY와 HAVING은 서로 바꿀 수 있지만 보통 사용하지 않음

- SELECT 문의 내부 파싱(문법적 해석) 순서는 나열된 순서와는 다름

- FROM > WHERE > GROUP BY > HAVING > SELECT > ORDER BY 순서대로 실행됨 

```sql
SELECT * | 칼럼명 | 표현식
FROM 테이블명 또는 뷰명
WHERE 조회 조건
GROUP BY 그룹핑컬럼명
HAVING 그룹핑 필터링 조건
ORDER BY 정렬컬럼명
```

### SELECT 절

- SELECT 문장을 사용하여 불러올 컬럼명, 연산 결과를 작성하는 절

- `*`를 사용하여 테이블 내 전체 컬럼명을 불러올 수 있음

- 원하는 컬럼을 `,`로 나열하여 작성 가능(순서대로 출력)

- 표현식이란 원래의 컬럼명을 제외한 모든 표현 가능한 대상(연산식, 기존 컬럼의 함수 변형식 포함)

#### **문법**

```sql
SELECT * | 칼럼명 | 표현식
FROM 테이블명 또는 뷰명
```

#### **특징**

- SELECT 절에서 표시할 대상 컬럼에 Alias(별칭) 지정 가능

- 대소문자를 구분하지 않아도 인식한다

#### **예시**

```sql
/* EMP 테이블의 전체 컬럼 조회 */
SELECT *
FROM EMP;
```

```sql
/* EMP 테이블의 특정 컬럼 조회 */
SELECT EMPNO, ENAME, SAL
FROM EMP;
```

```sql
/* 표현식을 사용하여 원본과 다른 데이터 출력 가능 */
SELECT EMPNO, ENAME, SAL * 1.1
FROM EMP;
```

### 컬럼 Alias(별칭)

- 컬럼명 대신 출력할 임시 이름 지정

    - SELECT 절에서만 정의 가능, 원본 컬럼명은 변경 X

- 컬럼명 뒤에 AS와 함께 컬럼 별칭 전달(AS는 생략 가능)

### 특징 및 주의사항

- SELECT 문보다 늦게 수행되는 ORDER BY 절에서만 컬럼 별칭 사용 가능

- 한글 사용 가능(한글 지원 캐릭터셋 설정 시)

- 이미 존재하는 예약어는 별칭으로 사용 불가

    - avg, count, decode, SELECT, FROM 등

- 다음의 경우에는 별칭에 반드시 쌍따옴표 전달 필요

    1. 별칭에 공백을 포함하는 경우

    2. 별칭에 특수문자를 포함하는 경우("_" 제외)

    3. 별칭 그대로 전달할 경우(입력한 대소를 그대로 출력하고자 할 때)

### FROM 절

- 테이블을 불러올 테이블명 또는 뷰 전달

- 테이블 여러 개 전달 가능(`,`로 구분)

    - 조인 조건 없이 테이블명만 나열 시 카티시안 곱 발생 주의

- 테이블 별칭 선언 가능(ORACLE은 AS 사용 불가, SQL Server 는 사용/생략 가능)

    - 테이블 별칭 선언 시 컬럼 구분자는 테이블 별칭으로만 전달(테이블명으로 사용 시 에러 발생)

- ORACLE에서는 FROM 절 생략 불가(의미상 필요 없는 경우 DUAL 테이블 선언)

    - ORACLE 23c 버전부터는 생략 가능

- SQL Server 에서는 FROM 절 필요 없을 경우 생략 가능(오늘 날짜 조회 시)

> 뷰 : 테이블과 동일하게 데이터를 조회할 수 있는 객체이지만 테이블처럼 실제 데이터가 저장된 것이 아닌, SELECT문 결과에 이름을 붙여 글 이름만으로 조회가 가능하도록 한 기능

```sql
/* 테이블 별칭 사용 예제 */
/* 테이블 별칭 선언 시 컬럼 구분자는 테이블 별칭으로만 전달(테이블명으로 사용 시 에러 발생) */
/* EMP.SAL -> E.SAL 변경해야함*/
SElECt E.ENAME, EMP.SAL, E.DEPTNO
FROM EMP E
WHERE E.DEPTNO = 10;
```








